<div class="activity bg-offred">
  <div class="position-re">
    <img src="/images/activity/activity-002.jpg" alt="" width="100%">
    <div class="rate-block">
      <div class="span-outer">
        <span>+</span>
        <span>0</span>
        <span>.</span>
        <span>5</span>
        <span>%</span>
      </div>
    </div>
  </div>
  <div class="bg-offred padding-l-2 padding-r-2 input-msg">
    <div class="margin-0 activity-input clear">
      <!-- <label for="username">  </label> -->
      <input id="usermobile" class="border-ra-full border-red" name="usermobile" required="required" type="tel" ng-model="user.mobile" placeholder="请输入手机号" ng-pattern="/^((13[0-9])|(15[^4,\D])|(18[0-9])|(17[0678])|(14[0-9]))\d{8}$/"> 
      <br>
      <p class="border-red border-ra-full fl width-full">
        <input type="number" placeholder="请输入验证码" class="border-ra-left" ng-model="user.captcha">
        <label for="" class="border-ra-right" onclick="countDown(this,60,'out');">获取验证码</label>
      </p>
      <button class="button-experience button-shadow-rate" ng-click="register(user)"><img src="/images/activity/activity-004.png"></button>
    </div>
  </div>
  <div class="activity-raterule">
    <div class="rule">
      <h4>加息券使用规则</h4>
      <p>1. 参与用户：新注册用户。</p>
      <p>2. 活动时间：11月26日-12月30日。</p>
      <p>3.获取规则：</p>
      <p>活动期间新用户注册即可获得一张加息券。加息利率为0.5%。</p>
      <p>4. 使用规则：</p>
      <p>1) 除零存宝外，其他产品均可以使用加息券投资。</p>
      <p>2) 每次投资仅限使用一张加息券。</p>
      <p>3) 加息券有效期限为90天，过期作废，不可转让。</p>
      <p>4) 加息券，加息时间为债权有效期。复投债权不继续加息。</p>
      <p>6. 加息时间：从使用加息券当日开始计算加息金额。</p>
      <p>7. 提现说明：预计第二个工作日24点前到帐，具体时间请咨询您绑定卡所属银行。</p>
      <p class="padding-b-3">8. 本活动最终解释权归宏财网所有。官方客服电话： 400-990-7626 (客服工作时间：9:00-18:00) 。</p>
    </div>
    <p class="bg-rateinner"><img src="/images/activity/activity-006.png" width="100%"></p>
  </div>
</div>
<script>
function countDown(obj, second, inOrOut) {
  var getMobile = document.getElementById("usermobile");
  var mobilePattern = /^((13[0-9])|(15[^4,\D])|(18[0-9])|(17[0678])|(14[0-9]))\d{8}$/;

  if (inOrOut === 'out' && window.buttonFlag == 0) {
    return;
  }

  // 如果秒数还是大于0，则表示倒计时还没结束
  if (mobilePattern.test(getMobile.value)) {
    if (second >= 0) {
      // 获取默认按钮上的文字

      if (typeof buttonDefaultValue === 'undefined') {
        buttonDefaultValue = obj.defaultValue;
      }
      // 按钮置为不可点击状态
      obj.disabled = true;
      window.buttonFlag = 0;
      // 按钮里的内容呈现倒计时状态
      //obj.value = buttonDefaultValue + '(' + second + ')';
      obj.innerHTML = "重新发送" + "(" + second + ")";
      obj.className = 'col-md-4 col-lg-4 white-button border-grey-bottom ft-grey7 padding-0 u-pull-right';
      // 时间减一
      second--;
      // 一秒后重复执行
      setTimeout(function() {
        countDown(obj, second, 'in');
      }, 1000);
      // 否则，按钮重置为初始状态
    } else {
      // 按钮置为可点击状态
      obj.disabled = false;
      window.buttonFlag = 1;
      // 按钮里的内容恢复初始状态
      obj.className = 'col-md-4 col-lg-4 border-none padding-0 u-pull-right';
      obj.innerHTML = "发送验证码";
    }
  } else {
    obj.disabled = true;
    window.buttonFlag = 0;
  }
}
</script>
